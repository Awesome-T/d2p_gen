name: CI

# Ð¸Ð¼Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð² Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°, ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ð¾Ðµ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ 
# Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒÑÑ Ð² ÑÐ¿Ð¸ÑÐºÐµ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð² Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ 
# Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ° Ð½Ð° Ð²ÐºÐ»Ð°Ð´ÐºÐµ Â«Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸ÑÂ» Ð²Ð°ÑˆÐµÐ³Ð¾ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ. Ð’ ÑÑ‚Ð¾Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ðµ 
# Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ñ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ github Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¸Ð¼ÐµÐ½Ð¸ 
# Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð°ÐºÑ‚ÐµÑ€Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¸Ð½Ð¸Ñ†Ð¸Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð·Ð°Ð¿ÑƒÑÐº Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°.
run-name: ${{ github.actor }} dart test
#
permissions: read-all

on:
  label:
    types: 
      - created
      - edited
  push:
    branches: 
      - "main"
      - "dev" 
    paths-ignore:
        - '**.md'
    # Sequence of patterns matched against refs/tags
    # tags:        
    #   - v2
    #   - v1.*
  pull_request:
    branches: 
      - "main"
      - "dev" 
    paths-ignore:
        - '**.md'
    # types:
    #    - opened
    #    - edited
  issues:
    types:
      - opened
      - labeled
      - reopened



# Ð’ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ðµ GitHub Actions, concurrency Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ 
# ÑÐ¾Ð±Ð¾Ð¹ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÐµÐ¼ 
# workflow Ð¸ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… 
# ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð¾Ð² workflow Ð´Ð»Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¸ Ñ‚Ð¾Ð³Ð¾ Ð¶Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð»Ð¸ 
# ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ.
concurrency:
  # group: ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ workflow.
  #  Ð’ÑÐµ workflow Ñ Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ñ‹Ð¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÐµÐ¼ group Ð±ÑƒÐ´ÑƒÑ‚ ÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒÑÑ 
  #  Ñ‡Ð°ÑÑ‚ÑŒÑŽ Ð¾Ð´Ð½Ð¾Ð¹ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹. Ð­Ñ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ð¾Ð½Ð¸ Ð±ÑƒÐ´ÑƒÑ‚ ÐºÐ¾Ð½ÐºÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ 
  #  Ð´Ñ€ÑƒÐ³ Ñ Ð´Ñ€ÑƒÐ³Ð¾Ð¼ Ð´Ð»Ñ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð² Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ.
  group: ${{ github.workflow }}-${{ github.ref }}
  # cancel-in-progress: Ð•ÑÐ»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð² true, Ñ‚Ð¾ GitHub Actions 
  # Ð±ÑƒÐ´ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ñ‚Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð½Ñ‹Ðµ workflow Ñ
  # Ñ‚ÐµÐ¼ Ð¶Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÐµÐ¼ group, ÐºÐ¾Ð³Ð´Ð° Ð½Ð¾Ð²Ñ‹Ð¹ workflow Ð¸Ð· ÑÑ‚Ð¾Ð¹ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ 
  # Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ. Ð­Ñ‚Ð¾ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ 
  # Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… workflow Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾ Ð² ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑÑ…, ÐºÐ¾Ð³Ð´Ð° Ð²Ñ‹ 
  # Ð½Ðµ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÑ‚Ð°Ñ€Ñ‹Ðµ workflow Ð¼ÐµÑˆÐ°Ð»Ð¸ Ð½Ð¾Ð²Ñ‹Ð¼.
  cancel-in-progress: true



# ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡ workflow
jobs:
  # check-bats-version:
  # Ð—Ð°Ð´Ð°Ñ‡Ð° Ð´Ð»Ñ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹
  # changes:
  #   runs-on: ubuntu-latest
  #   # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ð½Ðµ Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº pull request
  #   if: github.event.pull_request.draft == false
  #   # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð²Ñ‹Ñ…Ð¾Ð´Ð¾Ð² Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð·Ð°Ð´Ð°Ñ‡Ð°Ñ…
  #   outputs:
  #       needs_dart_package_checks: ${{ steps.needs_dart_package_checks.outputs.changes }}
  #   name: ðŸ‘€ Detect Changes
  #   steps:
  #     # Ð¨Ð°Ð³: Checkout Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ
  #     - name: ðŸ“š Git Checkout
  #       uses: actions/checkout@v3
  #     # Ð¨Ð°Ð³: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð° Ð´Ð»Ñ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ 
  #     # Ð² Ð¿Ð°ÐºÐµÑ‚Ð°Ñ… Dart
  #     - uses: dorny/paths-filter@v2
  #       name: Dart Package Detection
  #       id: needs_dart_package_checks
  #       with:
  #         filters: |
  #           bloc:
  #             - ./.github/codecov.yml
  #             - ./.github/workflows/main.yaml
  #             - ./.github/actions/dart_package/action.yaml
  #             - packages/bloc/**
  # 

  testing:
    # 
    runs-on: ubuntu-latest
    # defaults:
    #   run:
    #     # Run everything from within the arb_gen project directory
    #     working-directory: ./arb_gen
    steps:
      - uses: actions/checkout@v4
    # - uses: actions/first-interaction@v1
    #   with:
    #     repo-token: ${{ secrets.GITHUB_TOKEN }}
    #     issue-message: '# Message with markdown.\nThis is the message that will be displayed on users' first issue.'
    #     pr-message: 'Message that will be displayed on users' first pr. Look, a `code block` for markdown.'


    
    #  Ð¨Ð°Ð³: ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ Dart
    #   Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð½Ð¾Ð²Ñ‹Ð¹ ÑˆÐ°Ð³ Cache Dart dependencies, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚
    #    actions/cache@v2 Ð´Ð»Ñ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ ~/.pub-cache, 
    #    Ð³Ð´Ðµ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Dart.
    #   ÐšÐ»ÑŽÑ‡ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ÑÑ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð² pubspec.yaml, 
    #   Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ ÐºÑÑˆ Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð½Ð²Ð°Ð»Ð¸Ð´Ð¸Ñ€Ð¾Ð²Ð°Ð½, ÐµÑÐ»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÑÑ‚ÑÑ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸.
    #   ÐžÐ±Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ, Ñ‡Ñ‚Ð¾ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Ð¿Ð¾Ð»ÐµÐ·Ð½Ñ‹Ð¼,
    #    ÐºÐ¾Ð³Ð´Ð° Ñƒ Ð²Ð°Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ñ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾Ð¼ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹, Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ 
    #    ÑƒÑÐºÐ¾Ñ€Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹, Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ Ð¸Ñ… Ð¸Ð· ÐºÑÑˆÐ° 
    #    Ð¿Ñ€Ð¸ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ… workflow.
      - name: Cache Dart dependencies
        uses: actions/cache@v2
        with:
          path: |
            ~/.pub-cache
          key: ${{ runner.os }}-dart-${{ hashFiles('**/pubspec.yaml') }}
    #
      - uses: dart-lang/setup-dart@v1

        with:
          sdk: ${{ matrix.sdk }}
    # 1.  ÐœÑ‹ Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰Ð°ÐµÐ¼ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ `example/` Ð²Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ `example_temp/`.
    # 2.  Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð» `.gitignore` Ñ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ñ‹Ð¼ `example/`.
    # 3.  Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ `git update-index --assume-unchanged`,
    # Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð¿Ñ€Ð¾Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² `.gitignore` Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ workflow.
    # ÐžÐ±Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ, Ñ‡Ñ‚Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ --assume-unchanged Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ git Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ 
    # Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ .gitignore Ð´Ð»Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´, Ð¿Ð¾ÐºÐ° Ð²Ñ‹ Ð½Ðµ ÑÐ½Ð¾Ð²Ð° ÑÐ²Ð½Ð¾ Ñ€Ð°Ð·Ñ€ÐµÑˆÐ¸Ñ‚Ðµ 
    # Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ git update-index --no-assume-unchanged. Ð­Ñ‚Ð¾ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ
    # Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ .gitignore Ð² Ð¸Ð½Ð´ÐµÐºÑ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ¼.
      - name: Exclude example directory
        run: |
          mv example/ example_temp/
          echo "example/" > .gitignore
          GIT_INDEX_FILE=.git/index git update-index --assume-unchanged .gitignore        
      # - name: Exclude example directory
      #   run: |
      #     mv example/ example_temp/
      #     echo "example/" >> .gitignore
      #     git add .gitignore
      #     git commit -m "Exclude example directory"
      #     git push origin HEAD    
      - name: Install dependencies
        run: dart pub get
      # Uncomment this step to verify the use of 'dart format' on each commit.
      # - name: Verify formatting
      #   run: dart format --output=none --set-exit-if-changed .
      # Consider passing '--fatal-infos' for slightly stricter analysis.
      # - name: Analyze project source
      #   run: dart analyze
      # Your project will need to have tests in test/ and a dependency on
      # package:test for this step to succeed. Note that Flutter projects will
      # want to change this to 'flutter test'.
      - name: Run tests
        run: dart test
      #
      #  tests run, this will upload your coverage report to Codecov:
      # - name: Upload coverage reports to Codecov
      #   uses: codecov/codecov-action@v3
      #   env:
      #     CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}

      
      # Your project will need to have tests in test/ and a dependency on
      # package:test for this step to succeed. Note that Flutter projects will
      # want to change this to 'flutter test'.
      # - name: Run tests
      #   run: |
      #     if [ -d "example" ]; then
      #       dart test --coverage --exclude example
      #     else
      #       dart test --coverage
      #     fi
      
      # - name: Upgrade CHANGELOG and Version
      #   run: |
      #    if dart test ; then
      #     git config --global user.email "hereiscreativecode@gmail.com"
      #     git config --global user.name "Awesome-T"
      #     .sh/./update_changelog.sh 
      #     git add CHANGELOG.md
      #     git add pubspec.yaml
      #     git commit  -m "Updete package version [skin ci]"
      #     git push -f -u origin main   
      #     else
      #       echo "Error"
      #    fi